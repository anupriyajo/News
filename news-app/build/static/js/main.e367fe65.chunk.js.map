{"version":3,"sources":["actions/index.js","reducers/index.js","store/configureStore.js","components/Rating/Rating.js","components/NewsItem/NewsItem.js","components/NewsList/NewsList.js","components/Header/Header.js","components/App/App.js","index.js"],"names":["REQUEST_NEWS","RECEIVE_NEWS","REQUEST_POP_NEWS","RECEIVE_POP_NEWS","SAVE_RATING","SAVE_RATING_SUCCESS","rootReducer","combineReducers","allNews","state","arguments","length","undefined","action","type","Object","assign","isFetching","items","newsItems","lastUpdated","receivedAt","popNews","ratingReducer","isSaving","data","createLogger","Rating","props","_this","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","rating","handleChange","bind","assertThisInitialized","nextRating","setState","itemId","saveRating","newsId","_this2","react_default","a","createElement","className","name","concat","onChange","e","target","value","Component","connect","_ref","dispatch","fetch","method","headers","Content-Type","userId","then","response","json","console","log","saveRatingSuccess","catch","error","saveRatingFailure","NewsItem","news","src","mediaContent","href","link","title","author","publishedDate","description","components_Rating_Rating","newsItemId","NewsList","_this$props","newsType","content","map","newsItem","NewsItem_NewsItem","key","Header","React","App","fetchPopNews","fetchNews","_this$props2","popNewsItems","isFetchingPopNews","lastUpdatedPopNews","Header_Header","NewsList_NewsList","preloadedState","Date","now","receiveNews","receivePopNews","store","createStore","applyMiddleware","thunkMiddleware","ReactDOM","render","es","components_App_App","document","getElementById"],"mappings":"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","file":"static/js/main.e367fe65.chunk.js","sourcesContent":["import fetch from 'cross-fetch'\n\nexport const REQUEST_NEWS = 'REQUEST_NEWS'\nexport const RECEIVE_NEWS = 'RECEIVE_NEWS'\n\nexport const REQUEST_POP_NEWS = 'REQUEST_POP_NEWS'\nexport const RECEIVE_POP_NEWS = 'RECEIVE_POP_NEWS'\n\nexport const SAVE_RATING = 'SAVE_RATING'\nexport const SAVE_RATING_SUCCESS = 'SAVE_RATING_SUCCESS'\n//export const SAVE_RATING_FAILURE = 'SAVE_RATING_FAILURE'\n\nexport function saveRating({newsId, rating}) {\n  return dispatch => {\n    dispatch(inititateSaveRating())\n    return fetch(`http://192.168.0.4:8080/api/news/${newsId}/rating?rating=${rating}`,{\n      method: \"PUT\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        \"userId\" : \"1\"\n      }/*,\n      body: JSON.stringify({\n        rating: rating\n      })*/\n    })\n    .then(response => response.json())\n    .then(json => dispatch(saveRatingSuccess(json)))\n    .catch(error => dispatch(saveRatingFailure(error)));\n  }\n}\nfunction inititateSaveRating() {\n  return {\n    type: SAVE_RATING\n  }\n}\n\nexport function saveRatingSuccess(json) {\n  console.log(\"Rating saved:\", json);\n  return {\n    type: SAVE_RATING_SUCCESS,\n    data: json\n  }\n}\n\nfunction saveRatingFailure(error) {\n  console.error('saveRatingFailure Error:', error)\n  // TODO: dispatch failure to UI\n}\n\nfunction requestNews() {\n  return {\n    type: REQUEST_NEWS\n  }\n}\n\nfunction receiveNews(json) {\n  return {\n    type: RECEIVE_NEWS,\n    newsItems: json,\n    receivedAt: Date.now()\n  }\n}\n\nexport function fetchNews() {\n  return dispatch => {\n    dispatch(requestNews())\n    return fetch(`http://192.168.0.4:8080/api/news`)\n      .then(response => response.json())\n      .then(json => dispatch(receiveNews(json)))\n  }\n}\n\nfunction requestPopNews() {\n  return {\n    type: REQUEST_POP_NEWS\n  }\n}\n\nfunction receivePopNews(json) {\n  return {\n    type: RECEIVE_POP_NEWS,\n    newsItems: json,\n    receivedAt: Date.now()\n  }\n}\n\nexport function fetchPopNews() {\n  return dispatch => {\n    dispatch(requestPopNews())\n    return fetch(`http://192.168.0.4:8080/api/news/popular`)\n      .then(response => response.json())\n      .then(json => dispatch(receivePopNews(json)))\n  }\n}","import { combineReducers } from 'redux'\nimport {\n  REQUEST_NEWS,\n  RECEIVE_NEWS,\n  REQUEST_POP_NEWS,\n  RECEIVE_POP_NEWS,\n  SAVE_RATING,\n  SAVE_RATING_SUCCESS\n} from '../actions'\n\n\nfunction allNews(state = {}, action) {\n  switch (action.type) {\n    case REQUEST_NEWS:\n    return Object.assign({}, state, {\n      isFetching: true\n    })\n    case RECEIVE_NEWS:\n    return Object.assign({}, state, {\n      isFetching: false,\n      items: action.newsItems,\n      lastUpdated: action.receivedAt\n    })\n    default:\n      return state\n  }\n}\n\nfunction popNews(state = {}, action) {\n  switch (action.type) {\n    case REQUEST_POP_NEWS:\n      return Object.assign({}, state, {\n        isFetching: true\n      })\n    case RECEIVE_POP_NEWS:\n      return Object.assign({}, state, {\n        isFetching: false,\n        items: action.newsItems,\n        lastUpdated: action.receivedAt\n      })\n    default:\n      return state\n  }\n}\n\nfunction ratingReducer(state = {}, action) {\n  switch (action.type) {\n    case SAVE_RATING:\n      return Object.assign({}, state, {\n        isSaving: true,\n        data: {}\n      })\n    case SAVE_RATING_SUCCESS:\n      return Object.assign({}, state, {\n        isSaving: false,\n        data: action.data\n      })\n    default:\n      return state\n  }\n}\n\nconst rootReducer = combineReducers({\n  allNews,\n  popNews,\n  ratingReducer\n})\n\nexport default rootReducer","import { createStore, applyMiddleware } from 'redux'\nimport thunkMiddleware from 'redux-thunk'\nimport { createLogger } from 'redux-logger'\nimport rootReducer from '../reducers'\n\nconst loggerMiddleware = createLogger()\n\nexport default function configureStore(preloadedState) {\n  return createStore(\n    rootReducer,\n    preloadedState,\n    applyMiddleware(thunkMiddleware)\n  )\n}","import React, { Component } from 'react';\nimport './style.scss';\nimport PropTypes from 'prop-types';\nimport {\n    saveRating\n} from '../../actions';\nimport { connect } from 'react-redux';\n\nclass Rating extends Component {\n  constructor(props, state) {\n    super(props);\n    this.state = {\n      rating: 0\n    };\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  handleChange(nextRating) {\n    this.setState({rating: nextRating});\n    const { itemId } = this.props;\n    // TODO: use dispatch instead of direct function call\n    this.props.saveRating({newsId: itemId, rating: nextRating});\n  }\n\n  render() {\n    const { itemId } = this.props;\n    return (\n      <div className=\"rating-wrapper\">\n        Please rate: \n        <select name={`item-${itemId}`} onChange={e => this.handleChange(e.target.value)}>\n          <option value=\"1\">1</option>\n          <option value=\"2\">2</option>\n          <option value=\"3\">3</option>\n          <option value=\"4\">4</option>\n          <option value=\"5\">5</option>\n        </select>\n      </div>\n    )\n  }\n}\n\nRating.propTypes = {\n  isSaving: PropTypes.bool.isRequired\n //dispatch: PropTypes.func.isRequired\n}\n\nfunction mapStateToProps(state) {\n  const{ ratingReducer } = state;\n  const isSaving = ratingReducer.isSaving || true;\n\n  return {\n    isSaving\n  }\n}\n\nexport default connect(mapStateToProps, {saveRating})(Rating)","import React, { Component } from 'react';\nimport './style.scss';\nimport Rating from '../Rating';\n\nexport default class NewsItem extends Component {\n  render() {\n    const { news  } = this.props;\n    return (\n      <div className=\"list-item-wrapper\">\n        <img src={news.mediaContent} />\n        <a href={news.link} target=\"_blank\"><h3>{news.title}</h3></a>\n        <h6>{news.author} (published on: {news.publishedDate})</h6>\n        <div className=\"list-item\">{news.description}</div>\n        <Rating itemId={news.newsItemId}/>\n      </div>\n    )\n  }\n}","import React, { Component } from 'react';\nimport NewsItem from '../../components/NewsItem';\nimport './style.scss';\n\nexport default class NewsList extends Component {\n  render() {\n    const { newsType, newsItems } = this.props;\n    let content = (<div></div>);\n    \n    if(newsItems) {\n      content = newsItems.map((newsItem) =>  (\n        <NewsItem key={`item-${newsItem.newsItemId}`} news={newsItem}/>\n      ));\n    }\n\n    return (\n      <div className=\"list-wrapper\">\n        <h1>{newsType}</h1>\n        {content}\n      </div>\n    )\n  }\n}","import React, { Component } from 'react';\nimport './style.scss';\n\nexport default class Header extends React.Component {\n  render() {\n    return (\n      <div className=\"header\">\n        <div className=\"nav-bar\">\n          News Today\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from 'react';\nimport './style.scss';\nimport PropTypes from 'prop-types';\nimport {\n  fetchNews,\n  fetchPopNews\n} from '../../actions';\nimport { connect } from 'react-redux';\nimport NewsList from '../../components/NewsList';\nimport Header from '../../components/Header';\n\nclass App extends Component {\n  constructor(props) {\n    super(props)\n  }\n\n  componentDidMount() {\n    // TODO: use dispatch instead of direct function call\n    this.props.fetchPopNews();\n    this.props.fetchNews();\n  }\n\n  render() {\n    const { newsItems, isFetching, lastUpdated } = this.props;\n    const { popNewsItems, isFetchingPopNews, lastUpdatedPopNews } = this.props;\n    console.log(this.props);\n    return (\n      <div className=\"App\">\n        <Header />\n        <NewsList newsType=\"Today's top 5\" newsItems={this.props.popNewsItems} />\n        <NewsList newsType=\"More...\" newsItems={this.props.newsItems} />\n      </div>\n    );\n  }\n}\n\nApp.propTypes = {\n  newsItems: PropTypes.array.isRequired,\n  isFetching: PropTypes.bool.isRequired,\n  lastUpdated: PropTypes.number\n}\n\nfunction mapStateToProps(state) {\n  const { allNews, popNews } = state;\n  const isFetching = allNews.isFetching || true;\n  const newsItems = allNews.items || [];\n  const lastUpdated = allNews.lastUpdated;\n\n  const isFetchingPopNews = popNews.isFetching || true;\n  const popNewsItems = popNews.items || [];\n  const lastUpdatedPopNews = popNews.lastUpdated;\n\n\n\n  return {\n    newsItems,\n    isFetching,\n    lastUpdated,\n    isFetchingPopNews,\n    popNewsItems,\n    lastUpdatedPopNews\n  }\n}\n\nexport default connect(mapStateToProps, {fetchNews, fetchPopNews})(App);\n","import '@babel/polyfill';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { Provider } from 'react-redux';\nimport configureStore from './store/configureStore'\n// import rootReducer from './reducers';\nimport App from './components/App';\n\nconst store = configureStore()\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>, document.getElementById('root'));\n\n"],"sourceRoot":""}